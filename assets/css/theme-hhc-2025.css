/* ============================================================
   SANS Holiday Hack 2025 – Evergreen Teal (Relearn)
   DROP-IN theme.css (consolidated)
   Goals:
   - modern / premium / readable
   - subtle fun (micro-motion + signature h2 divider)
   - square code + square blockquotes
   - sidebar: flat, legible, no rounded borders
   ============================================================ */

/* --------------------------------------------- */
/* Fonts                                          */
/* --------------------------------------------- */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

/* Relearn base */
@import "theme-relearn-dark.css";

/* --------------------------------------------- */
/* Design tokens                                  */
/* --------------------------------------------- */
:root {
  /* Base surfaces */
  --bg-0: #07141a; /* page */
  --bg-1: #0b1b22; /* sidebar */
  --bg-2: #0e2029; /* content surface */
  --bg-3: #0b171d; /* code surface */

  /* Text */
  --ink-0: rgba(245, 252, 255, 1);
  --ink-1: rgba(225, 236, 241, 0.90);
  --ink-2: rgba(225, 236, 241, 0.72);

  /* Accents */
  --evergreen: rgba(56, 201, 113, 1);
  --evergreen-h: rgba(120, 232, 165, 1);
  --teal: rgba(45, 166, 164, 1);
  --teal-h: rgba(110, 214, 212, 1);

  /* Hairlines */
  --line-0: rgba(255, 255, 255, 0.08);
  --line-1: rgba(255, 255, 255, 0.12);

  /* Relearn variable mapping */
  --PRIMARY-color: var(--evergreen);
  --PRIMARY-HOVER-color: var(--evergreen-h);
  --SECONDARY-color: var(--teal);
  --SECONDARY-HOVER-color: var(--teal-h);

  --MAIN-BG-color: var(--bg-0);
  --MAIN-TOPBAR-BORDER-color: var(--line-0);

  --MAIN-TEXT-color: var(--ink-1);
  --MAIN-TITLES-TEXT-color: var(--ink-0);

  --CODE-theme: relearn-dark;
  --CODE-BLOCK-color: rgba(236, 244, 248, 1);
  --CODE-BLOCK-BG-color: var(--bg-3);
  --CODE-BLOCK-BORDER-color: var(--line-0);

  --CODE-INLINE-color: rgba(190, 247, 214, 1);
  --CODE-INLINE-BG-color: rgba(255, 255, 255, 0.06);
  --CODE-INLINE-BORDER-color: rgba(255, 255, 255, 0.10);

  --BROWSER-theme: dark;
  --MERMAID-theme: dark;
  --OPENAPI-theme: dark;
  --OPENAPI-CODE-theme: obsidian;

  --MENU-BORDER-color: var(--line-0);
  --MENU-TOPBAR-BORDER-color: var(--line-0);
  --MENU-TOPBAR-SEPARATOR-color: var(--line-0);

  --MENU-HEADER-BG-color: transparent;
  --MENU-HEADER-BORDER-color: transparent;

  --MENU-HOME-LINK-color: rgba(235, 245, 249, 0.92);
  --MENU-HOME-LINK-HOVER-color: var(--evergreen);

  --MENU-SECTIONS-BG-color: linear-gradient(180deg, #061216 0%, #0b1b22 100%);
  --MENU-SECTIONS-ACTIVE-BG-color: rgba(255, 255, 255, 0.03);

  --MENU-SECTIONS-LINK-color: rgba(225, 236, 241, 0.78);
  --MENU-SECTIONS-LINK-HOVER-color: rgba(245, 252, 255, 1);

  --MENU-SECTION-ACTIVE-CATEGORY-color: rgba(245, 252, 255, 1);
  --MENU-SECTION-ACTIVE-CATEGORY-BG-color: rgba(255, 255, 255, 0.04);

  --BOX-CAPTION-color: rgba(245, 252, 255, 1);
  --BOX-BG-color: rgba(255, 255, 255, 0.03);
  --BOX-TEXT-color: rgba(225, 236, 241, 0.92);
  --BOX-GREY-color: rgba(255, 255, 255, 0.05);
}

:root[color-theme="dark"] {
  --MAIN-BG-color: var(--bg-0);
  --BROWSER-theme: dark;
}

/* --------------------------------------------- */
/* Global base                                    */
/* --------------------------------------------- */
html { scroll-behavior: smooth; }

body {
  font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
               "Ubuntu", "Cantarell", "Noto Sans", "Helvetica Neue", Arial, sans-serif;
  font-size: 16px;
  line-height: 1.68;
  color: var(--ink-1);
  background:
    radial-gradient(1200px 700px at 18% 12%, rgba(45,166,164,0.11), transparent 60%),
    radial-gradient(1000px 800px at 82% 84%, rgba(56,201,113,0.09), transparent 55%),
    linear-gradient(180deg, #051014 0%, #07141a 55%, #061216 100%);
}

body::before, body::after { content: none !important; display: none !important; }

/* Links */
a {
  color: rgba(190, 210, 236, 0.95);
  text-decoration-thickness: 1px;
  text-underline-offset: 0.18em;
  transition: color 120ms ease;
}
a:hover, a:focus { color: var(--evergreen-h); }

/* Subtle emphasis (reward) */
strong {
  color: rgba(190, 247, 214, 1);
  font-weight: 650;
}

/* Micro-motion (intent-only) */
#R-sidebar a.padding,
.main__content img,
#body-inner img {
  transition: transform 120ms ease, opacity 120ms ease, background-color 120ms ease;
}
#R-sidebar a.padding:hover { transform: translateX(2px); }
.main__content img:hover,
#body-inner img:hover { transform: scale(1.01); }

@media (prefers-reduced-motion: reduce) {
  #R-sidebar a.padding,
  .main__content img,
  #body-inner img,
  a,
  h2::after, .h2::after {
    transition: none !important;
    animation: none !important;
    transform: none !important;
  }
}

/* --------------------------------------------- */
/* Content surface                                */
/* --------------------------------------------- */
.main, #body-inner { background: transparent; }

.main__content,
#body-inner {
  max-width: 940px;
  background: linear-gradient(180deg, rgba(255,255,255,0.035), rgba(255,255,255,0.018));
  border: 1px solid var(--line-0);
  border-radius: 12px;
  box-shadow: 0 18px 50px rgba(0,0,0,0.38);
  padding: 2.35rem 2.65rem;
  margin: 2.2rem auto;
}

.main__content::before,
.main__content::after,
#body-inner::before,
#body-inner::after { content: none !important; display: none !important; }

.main__content p,
#body-inner p { margin: 0.95rem 0; }

/* --------------------------------------------- */
/* Headings                                       */
/* --------------------------------------------- */
h1, .h1 {
  color: var(--ink-0);
  font-weight: 700;
  letter-spacing: 0.01em;
  line-height: 1.16;
  margin: 0.25rem 0 1.15rem;
}
h2, .h2 {
  color: var(--ink-0);
  font-weight: 650;
  letter-spacing: 0.006em;
  line-height: 1.25;
  margin: 2.1rem 0 0.9rem;
}
h2::after, .h2::after {
  content: "";
  display: block;
  margin-top: 0.55rem;
  width: 96px;
  height: 1px;
  background: linear-gradient(90deg, rgba(56,201,113,0.85), rgba(45,166,164,0.55), transparent);
  background-size: 200% 100%;
  animation: headerSweep 6s ease-in-out infinite;
}
@keyframes headerSweep {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
h3, .h3 { color: rgba(245,252,255,0.94); font-weight: 600; margin: 1.45rem 0 0.65rem; }
h4, .h4 { color: rgba(245,252,255,0.92); font-weight: 600; margin: 1.15rem 0 0.55rem; }

/* --------------------------------------------- */
/* Topbar                                         */
/* --------------------------------------------- */
.topbar {
  background: rgba(6, 15, 19, 0.88);
  backdrop-filter: blur(8px);
  border-bottom: 1px solid var(--line-0);
}

/* --------------------------------------------- */
/* Sidebar (flat, legible, no rounded borders)    */
/* --------------------------------------------- */
#R-sidebar {
  background: var(--MENU-SECTIONS-BG-color) !important;
  border-right: 1px solid var(--line-0) !important;
  box-shadow: 6px 0 18px rgba(0,0,0,0.32);
}

/* no rounding in sidebar */
#R-sidebar,
#R-sidebar * {
  border-radius: 0 !important;
  box-shadow: none !important;
}

/* title area */
#R-logo {
  display: block !important;
  padding: 1.0rem 0.9rem 0.55rem 0.9rem !important;
  text-decoration: none !important;
}
#R-logo .logo-title {
  color: rgba(245,252,255,0.95) !important;
  font-weight: 650 !important;
  letter-spacing: 0.02em !important;
  font-size: 1.15rem !important;
  line-height: 1.2 !important;
  opacity: 1 !important;
}

/* remove the annoying separators */
#R-header { border-bottom: 0 !important; margin-bottom: 0.65rem !important; }
#R-sidebar .R-menu-divider,
#R-sidebar .R-menu-divider hr,
#R-sidebar hr.padding { display: none !important; height: 0 !important; border: 0 !important; }

/* remove list noise */
#R-sidebar ul, #R-sidebar li { list-style: none !important; }

/* main menu container */
#R-sidebar .R-shortcutmenu-main > ul.enlarge {
  padding: 0.2rem 0 0.8rem 0 !important;
  margin: 0 !important;
}

/* parent sections (ACT 1/2/3 etc.) */
#R-sidebar .R-shortcutmenu-main > ul.enlarge > li.parent > a.padding,
#R-sidebar .R-shortcutmenu-main > ul.enlarge > li > a.padding {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;

  padding: 0.55rem 0.9rem !important;
  margin: 0.35rem 0 !important;

  font-size: 0.78rem !important;
  font-weight: 700 !important;
  letter-spacing: 0.10em !important;
  text-transform: uppercase !important;

  color: rgba(225,236,241,0.82) !important;
  background: transparent !important;
  border: 0 !important;
}

/* caret */
#R-sidebar .R-shortcutmenu-main > ul.enlarge > li.parent > a.padding::after {
  content: "▾" !important;
  color: rgba(225,236,241,0.55) !important;
  font-size: 0.85rem !important;
  line-height: 1 !important;
  transform: translateY(-1px);
}

/* nested list */
#R-sidebar .R-shortcutmenu-main ul.enlarge li ul.collapsible-menu {
  margin: 0.15rem 0 0.65rem 0 !important;
  padding: 0 !important;
  border-left: 1px solid rgba(255,255,255,0.08) !important;
  margin-left: 0.9rem !important;
}

/* child links */
#R-sidebar .R-shortcutmenu-main li ul.collapsible-menu > li > a.padding {
  display: block !important;
  padding: 0.38rem 0.9rem 0.38rem 0.75rem !important;
  margin: 0 !important;
  font-size: 0.92rem !important;
  font-weight: 450 !important;
  color: rgba(225,236,241,0.78) !important;
  background: transparent !important;
  border: 0 !important;
}
#R-sidebar .R-shortcutmenu-main li ul.collapsible-menu > li > a.padding:hover {
  color: rgba(245,252,255,0.98) !important;
  background: rgba(255,255,255,0.03) !important;
}

/* active child */
#R-sidebar .R-shortcutmenu-main li ul.collapsible-menu > li.active > a.padding,
#R-sidebar .R-shortcutmenu-main li ul.collapsible-menu > li.visited.active > a.padding {
  color: rgba(245,252,255,1) !important;
  font-weight: 650 !important;
  background: rgba(56,201,113,0.08) !important;
  position: relative !important;
}
#R-sidebar .R-shortcutmenu-main li ul.collapsible-menu > li.active > a.padding::before,
#R-sidebar .R-shortcutmenu-main li ul.collapsible-menu > li.visited.active > a.padding::before {
  content: "" !important;
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  bottom: 0 !important;
  width: 3px !important;
  background: rgba(56,201,113,0.90) !important;
}

/* --------------------------------------------- */
/* Blockquotes (square + slightly narrative)      */
/* --------------------------------------------- */
blockquote {
  margin: 1.6rem 0;
  padding: 1.05rem 1.2rem;
  background: rgba(255,255,255,0.025);
  border: 1px solid var(--line-0);
  border-left: 3px solid rgba(45,166,164,0.90);
  border-radius: 0 !important;
  box-shadow: none;
  color: rgba(225,236,241,0.86);
  font-style: italic;
  opacity: 0.92;
}
blockquote::before, blockquote::after { content: none !important; }
blockquote p { margin: 0.65rem 0; }

/* --------------------------------------------- */
/* Code (square + NO risky wrapper nuking)         */
/* --------------------------------------------- */
code, pre, kbd, samp {
  font-family: "JetBrains Mono", Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}

code {
  color: var(--CODE-INLINE-color);
  background: var(--CODE-INLINE-BG-color);
  border: 1px solid var(--CODE-INLINE-BORDER-color);
  border-radius: 0 !important;
  padding: 0.12rem 0.32rem;
}

/* The only "artefact removal" that is safe: kill pseudo chrome on pre */
pre::before, pre::after,
pre.chroma::before, pre.chroma::after,
.highlight > pre::before, .highlight > pre::after {
  content: none !important;
  display: none !important;
}

pre,
pre.chroma,
.highlight > pre {
  color: var(--CODE-BLOCK-color);
  background: linear-gradient(180deg, rgba(7,16,20,1), rgba(11,23,29,1));
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 0 !important;
  box-shadow: 0 14px 28px rgba(0,0,0,0.38);
  padding: 1.0rem 1.15rem;
  overflow: auto;
}

/* keep chroma internals intact (DON'T touch highlight tables) */
pre code,
pre.chroma code,
.highlight code {
  background: transparent !important;
  border: 0 !important;
  padding: 0 !important;
  color: inherit !important;
}

/* --------------------------------------------- */
/* Admonitions / boxes                             */
/* --------------------------------------------- */
.box, .admonition {
  background: rgba(255,255,255,0.03);
  border: 1px solid var(--line-0);
  border-radius: 12px;
  box-shadow: none;
}
.admonition-title, .box .box-title {
  text-transform: none;
  letter-spacing: 0.01em;
  font-weight: 600;
  font-size: 0.86rem;
  color: rgba(245,252,255,0.96);
  border-bottom: 1px solid var(--line-0);
  padding-bottom: 0.35rem;
  margin-bottom: 0.55rem;
}
.admonition-title::before { content: none !important; }

.admonition.note, .admonition.info { border-left: 4px solid rgba(45,166,164,0.85); }
.admonition.tip, .admonition.success { border-left: 4px solid rgba(56,201,113,0.85); }
.admonition.warning { border-left: 4px solid rgba(245,207,74,0.85); }
.admonition.danger, .admonition.error { border-left: 4px solid rgba(235,76,88,0.85); }

/* --------------------------------------------- */
/* Tables                                         */
/* --------------------------------------------- */
table {
  border-collapse: collapse;
  width: 100%;
  margin: 1.2rem 0;
  border: 1px solid var(--line-0);
  border-radius: 12px;
  overflow: hidden;
}
th, td { padding: 0.55rem 0.80rem; }
th {
  background: rgba(255,255,255,0.05);
  color: rgba(245,252,255,0.96);
  text-align: left;
  font-weight: 600;
  border-bottom: 1px solid var(--line-0);
}
tr:nth-child(even) td { background: rgba(255,255,255,0.02); }
td { border-top: 1px solid rgba(255,255,255,0.06); }

/* --------------------------------------------- */
/* Images                                         */
/* --------------------------------------------- */
.main__content img,
#body-inner img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 1.4rem auto;
  border-radius: 10px;
  border: 1px solid var(--line-0);
  background: rgba(0,0,0,0.18);
  box-shadow: 0 18px 40px rgba(0,0,0,0.46);
}

/* --------------------------------------------- */
/* Lists                                          */
/* --------------------------------------------- */
.main__content ul,
#body-inner ul {
  list-style: disc;
  padding-left: 1.35rem;
}
.main__content ul li::before,
#body-inner ul li::before { content: none !important; }

/* --------------------------------------------- */
/* Horizontal rules                               */
/* --------------------------------------------- */
hr {
  border: 0;
  height: 1px;
  margin: 2rem 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.14), transparent);
}

/* --------------------------------------------- */
/* Mermaid panels                                 */
/* --------------------------------------------- */
.main__content .mermaid,
#body-inner .mermaid {
  background: rgba(255,255,255,0.03);
  border-radius: 12px;
  padding: 1.1rem;
  border: 1px solid var(--line-0);
  box-shadow: none;
  overflow: hidden;
}

/* --------------------------------------------- */
/* Print                                          */
/* --------------------------------------------- */
@media print {
  body { background: #ffffff !important; color: #111 !important; }
  .main__content, #body-inner {
    margin: 0 !important;
    box-shadow: none !important;
    border-radius: 0 !important;
    background: #ffffff !important;
    border: 0 !important;
    padding: 0 !important;
  }
  #TableOfContents { display: none !important; }
}


/* ============================================================
   Visual identity for Quotes vs Code (cool, not tacky)
   ============================================================ */

/* ---------- QUOTES: "Briefing" panel ---------- */
blockquote {
  position: relative;
  padding-top: 1.65rem;             /* room for label */
  background: linear-gradient(180deg, rgba(255,255,255,0.030), rgba(255,255,255,0.018));
  border: 1px solid rgba(255,255,255,0.10);
  border-left: 3px solid rgba(45,166,164,0.90); /* teal rail */
}

blockquote::before {
  content: "BRIEFING";
  position: absolute;
  top: 0.55rem;
  left: 1.05rem;

  font-style: normal;
  font-size: 0.70rem;
  font-weight: 700;
  letter-spacing: 0.14em;

  color: rgba(225,236,241,0.60);
}

/* slight emphasis for quoted text */
blockquote p {
  color: rgba(235,245,249,0.86);
}

/* ---------- CODE: "Terminal" panel ---------- */
pre,
pre.chroma,
.highlight > pre {
  position: relative;
  padding-top: 2.05rem; /* room for label */
  border: 1px solid rgba(255,255,255,0.12);
}

/* terminal label + subtle top rule */
pre::before,
pre.chroma::before,
.highlight > pre::before {
  content: "TERMINAL";
  position: absolute;
  top: 0.55rem;
  left: 1.05rem;

  font-size: 0.70rem;
  font-weight: 700;
  letter-spacing: 0.14em;

  color: rgba(190,247,214,0.55); /* evergreen tint */
}

/* a thin scanline-ish divider under the label */
pre::after,
pre.chroma::after,
.highlight > pre::after {
  content: "";
  position: absolute;
  left: 1.05rem;
  right: 1.05rem;
  top: 1.35rem;
  height: 1px;
  background: linear-gradient(
    90deg,
    rgba(56,201,113,0.55),
    rgba(45,166,164,0.35),
    transparent
  );
}

/* Keep label from colliding with code content */
pre code,
pre.chroma code,
.highlight code {
  display: block;
}

/* Respect reduced motion users if you later animate anything */
@media (prefers-reduced-motion: reduce) {
  pre, blockquote { transition: none !important; }
}

/* ============================================================
   Context-aware code labels (CSS-only)
   Works if Chroma outputs code[data-lang] or code.language-*
   ============================================================ */

/* Base label (fallback) */
pre,
pre.chroma,
.highlight > pre {
  position: relative;
  padding-top: 2.05rem;
}

pre::before,
pre.chroma::before,
.highlight > pre::before {
  content: "TERMINAL";
  position: absolute;
  top: 0.55rem;
  left: 1.05rem;
  font-size: 0.70rem;
  font-weight: 700;
  letter-spacing: 0.14em;
  color: rgba(190,247,214,0.55);
}

/* Divider under label */
pre::after,
pre.chroma::after,
.highlight > pre::after {
  content: "";
  position: absolute;
  left: 1.05rem;
  right: 1.05rem;
  top: 1.35rem;
  height: 1px;
  background: linear-gradient(90deg, rgba(56,201,113,0.55), rgba(45,166,164,0.35), transparent);
}

/* ---------- data-lang selectors (most common in Hugo/Chroma) ---------- */
.highlight pre:has(code[data-lang="bash"])::before { content: "BASH"; }
.highlight pre:has(code[data-lang="shell"])::before { content: "SHELL"; }
.highlight pre:has(code[data-lang="sh"])::before { content: "SH"; }
.highlight pre:has(code[data-lang="powershell"])::before { content: "POWERSHELL"; }
.highlight pre:has(code[data-lang="pwsh"])::before { content: "POWERSHELL"; }
.highlight pre:has(code[data-lang="python"])::before { content: "PYTHON"; }
.highlight pre:has(code[data-lang="go"])::before { content: "GO"; }
.highlight pre:has(code[data-lang="rust"])::before { content: "RUST"; }
.highlight pre:has(code[data-lang="javascript"])::before { content: "JAVASCRIPT"; }
.highlight pre:has(code[data-lang="typescript"])::before { content: "TYPESCRIPT"; }
.highlight pre:has(code[data-lang="json"])::before { content: "JSON"; }
.highlight pre:has(code[data-lang="yaml"])::before { content: "YAML"; }
.highlight pre:has(code[data-lang="toml"])::before { content: "TOML"; }
.highlight pre:has(code[data-lang="sql"])::before { content: "SQL"; }
.highlight pre:has(code[data-lang="http"])::before { content: "HTTP"; }
.highlight pre:has(code[data-lang="xml"])::before { content: "XML"; }
.highlight pre:has(code[data-lang="dockerfile"])::before { content: "DOCKERFILE"; }

/* ---------- class-based selectors (if you get language-xyz classes instead) ---------- */
.highlight pre:has(code.language-bash)::before { content: "BASH"; }
.highlight pre:has(code.language-powershell)::before { content: "POWERSHELL"; }
.highlight pre:has(code.language-python)::before { content: "PYTHON"; }
.highlight pre:has(code.language-go)::before { content: "GO"; }
.highlight pre:has(code.language-rust)::before { content: "RUST"; }
.highlight pre:has(code.language-json)::before { content: "JSON"; }
.highlight pre:has(code.language-yaml)::before { content: "YAML"; }
.highlight pre:has(code.language-sql)::before { content: "SQL"; }

/* Optional: make the label slightly different per family */
.highlight pre:has(code[data-lang="powershell"])::before,
.highlight pre:has(code.language-powershell)::before {
  color: rgba(110,214,212,0.60);
}
.highlight pre:has(code[data-lang="python"])::before,
.highlight pre:has(code.language-python)::before {
  color: rgba(190,247,214,0.60);
}
